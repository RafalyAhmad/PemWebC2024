DROP TABLE TAMU_KELUAR;
DROP TABLE TAMU_MASUK;
DROP TABLE USERS;

CREATE TABLE USERS
(id_pengguna INT(4) UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
username_pengguna VARCHAR(25) UNIQUE NOT NULL,
password_pengguna VARCHAR(25) NOT NULL,
date_created DATETIME DEFAULT CURRENT_TIMESTAMP on UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE TAMU_MASUK
(id_tamu_masuk INT(5) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
username_pengguna VARCHAR(25) NOT NULL,
keperluan VARCHAR(255) NOT NULL,
waktu_masuk DATETIME DEFAULT CURRENT_TIMESTAMP on UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE TAMU_KELUAR
(id_tamu_keluar INT(5) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
username_pengguna VARCHAR(25) NOT NULL,
waktu_keluar DATETIME DEFAULT CURRENT_TIMESTAMP on UPDATE CURRENT_TIMESTAMP
);

ALTER TABLE tamu_masuk ADD FOREIGN KEY(username_pengguna) REFERENCES users(username_pengguna);
ALTER TABLE tamu_keluar ADD FOREIGN KEY(username_pengguna) REFERENCES tamu_masuk(username_pengguna);
